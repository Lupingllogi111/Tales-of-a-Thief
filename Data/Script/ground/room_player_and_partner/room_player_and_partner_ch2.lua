require 'common'
require 'CommonFunctions'
room_player_and_partner_ch2 = {}


function room_player_and_partner_ch2.firstDaySuccessfulCut()
    local player = CH('PLAYER')
    local partner = CH('Teammate1')

    GAME:CutsceneMode(true)
    CommonFunctions.Dialogue(partner, 3, "Happy", "Today was an eventful day, huh?")
    CommonFunctions.Dialogue(player, 3, "Sigh", "Yeah.[pause=0] I'm beat...")
    GAME:WaitFrames(60)
    CommonFunctions.Dialogue(partner, 3, "Normal", "Then we should go straight to bed.")
    CommonFunctions.Dialogue(partner, 3, "Worried", "Unless there's something else you want to talk about...?")
    CommonFunctions.Dialogue(player, 3, "Worried", "...")
    GAME:WaitFrames(60)
    CommonFunctions.Dialogue(player, 3, "Worried", "Maybe...")
    CommonFunctions.Dialogue(player, 3, "Normal", "I want to know more about you.")
    CommonFunctions.Dialogue(player, 3, "Normal", "Just one question, if that's alright.")
    CommonFunctions.Dialogue(partner, 3, "Normal", "Sure.[br]What do you want to know?")
    GAME:WaitFrames(50)
    CommonFunctions.Dialogue(player, 3, "Worried", "How do you manage to do this every day?")
    CommonFunctions.Dialogue(partner, 3, "Worried", "What do you mean?")
    CommonFunctions.Dialogue(player, 3, "Worried", "I mean...")
    GAME:WaitFrames(60)
    CommonFunctions.Dialogue(player, 3, "Worried", "You told me you did this because you had to, right?")
    CommonFunctions.Dialogue(player, 3, "Worried", "If you don't want to steal things, hurt others, etc,[pause=40] how do you manage to do it and not feel bad?")
    GAME:WaitFrames(60)
    CommonFunctions.Dialogue(partner, 3, "Sad", "...")
    CommonFunctions.Dialogue(partner, 3, "Sad", "I don't like it, " .. player:GetDisplayName() ..".")
    CommonFunctions.Dialogue(partner, 3, "Sad", "But I don't have any other option.")
    GAME:WaitFrames(60)
    CommonFunctions.Dialogue(partner, 3, "Pain", "Look, it's...[pause=50] it's complicated.")

    GAME:WaitFrames(60)
    CommonFunctions.Dialogue(player, 3, "Stunned", "Sorry...")
    CommonFunctions.Dialogue(player, 3, "Sad", "Maybe I shouldn't have asked.")
    GAME:WaitFrames(60)
    CommonFunctions.Dialogue(partner, 3, "Sad", "No, it...")
    GAME:WaitFrames(40)
    CommonFunctions.Dialogue(partner, 3, "Sigh", "It wasn't your fault.[br]I agreed to answer the question, anyway.")
    CommonFunctions.Dialogue(partner, 3, "Happy", "Let's go to sleep, shall we?")
    GAME:WaitFrames(40)

    GROUND:CharSetAnim(partner, "Laying", true)
    GAME:WaitFrames(60)
    GROUND:CharSetAnim(player, "Laying", true)
    GAME:WaitFrames(60)
    UI:ResetSpeaker()
    UI:WaitShowDialogue("Goodnight, " .. player:GetDisplayName()..".")
    GAME:WaitFrames(40)
    GROUND:CharSetAnim(partner, "EventSleep", true)
    GAME:WaitFrames(60)
    CommonFunctions.Dialogue(player, 2, "Worried", "("..partner:GetDisplayName().."...)")
    GAME:WaitFrames(60)
    CommonFunctions.Dialogue(player, 2, "Worried", "(She tried to put a happy face for me, but...)")
    CommonFunctions.Dialogue(player, 2, "Worried", "(It's clear she didn't like answering that question.)")
    CommonFunctions.Dialogue(player, 2, "Worried", "(It must be a topic she doesn't like to discuss.)")
    GAME:WaitFrames(60)
    CommonFunctions.Dialogue(player, 2, "Worried", "(Maybe I shouldn't press it too much.)")
    CommonFunctions.Dialogue(player, 2, "Normal", "(She'll tell me if she wants to.)")
    GAME:WaitFrames(60)
    CommonFunctions.Dialogue(player, 2, "Normal", "(It's better if I go to sleep now.)")
    CommonFunctions.Dialogue(player, 2, "Pain", "(I'm really beat.)")
    GAME:WaitFrames(60)
    GROUND:CharSetAnim(player, "EventSleep", true)
    GAME:WaitFrames(120)
    SOUND:FadeOutBGM(120)
    GAME:FadeOut(false, 60)
    SV.progression.first_day_done = true
    GAME:WaitFrames(300)
	GAME:CutsceneMode(false)
    CommonFunctions.Wakey()


end